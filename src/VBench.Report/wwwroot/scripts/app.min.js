var VBench;!function(t){var e=function(){function t(t,e,i,o){void 0===o&&(o=1),this.r=t,this.g=e,this.b=i,this.a=o}return t.prototype.getValue=function(t){return"rgba("+this.r+","+this.g+","+this.b+","+(t||this.a)+")"},t}();t.Color=e}(VBench||(VBench={})),function(e){var t=function(){function t(){this._index=0,this._colors=[new e.Color(11,95,165),new e.Color(255,148,0),new e.Color(59,20,175),new e.Color(255,213,0),new e.Color(116,9,170),new e.Color(251,254,0),new e.Color(0,153,153),new e.Color(255,116,0),new e.Color(0,204,0),new e.Color(255,0,0)],this.textColor=new e.Color(225,225,225),this.backgroundColor=new e.Color(30,30,30)}return t.prototype.newColor=function(){return this._index=this._index<this._colors.length?this._index:0,this._colors[this._index++]},t.prototype.getCurrentColor=function(){return this._colors[this._index]},t}();e.ColorGenerator=t}(VBench||(VBench={})),function(t){var e=function(){function i(t,e){this.typeId=i.TypeId,this.table=t,this.unitKind=e.unitKind,this.isNumeric=e.isNumeric,this.name=ko.observable(e.name||"-"),this.isSelected=ko.observable(!1),this.shouldHide=ko.observable(!1)}return i.TypeId=2,i}();t.DataColumn=e}(VBench||(VBench={})),function(t){var e=function(){function o(t,e,i){this.typeId=o.TypeCode;this.row=t,this.columnIndex=e,this.comparison=ko.observable(0),this.value=ko.observable(),this.units=ko.observable(""),this.difference=ko.observable(),this.isNumeric=ko.observable(!1),this.isSelected=ko.observable(!1),this.isHidden=ko.observable(e<7),this.computeValue(i,t.table.columns()[e]),this.computeDifference()}return o.prototype.computeValue=function(t,e){if(this.unitKind=e.unitKind,e.isNumeric&&Array.isArray(t)){this.isNumeric(!0);var i=this.history=t;switch(e.unitKind){default:this.value(i[i.length-1]);break;case 1:case 2:var o=i[i.length-1];this.value(o.value)}}else this.value(t)},o.prototype.getDataPoints=function(){if(!this.isNumeric())return[];var t,e=[];switch(this.unitKind){default:for(var i=0;i<this.history.length;i++)t=this.history[i],e.push("number"==typeof t?t:null);break;case 1:case 2:for(i=0;i<this.history.length;i++)t=this.history[i].point,e.push("number"==typeof t?t:null)}return e},o.prototype.computeDifference=function(){var t,e,i=this.getDataPoints();if(0===i.length)return null;switch(t=i[i.length-1],this.comparison()){case 0:e=2<=i.length?i[i.length-2]:t;break;case 1:e=t;for(var o=0;o<i.length;o++)i[o]<e&&(e=i[o]);break;case 2:e=t;for(o=0;o<i.length;o++)i[o]>e&&(e=i[o])}var n=e<=t?"+":"-",s=Math.abs(e-t),a=s/e*100;this.difference("["+n+s+" ("+(1<=a?a.toFixed(0):a.toFixed(2))+"%)]")},o.TypeCode=3,o}();t.DataCell=e}(VBench||(VBench={})),function(n){var t=function s(t,e){var i=this;this.table=t,this.values=ko.observableArray(),this.key=e[7],this.isSelected=ko.observable(!1);for(var o=0;o<e.length;o++)this.values.push(new n.DataCell(this,o,e[o]));this.isSelected=ko.pureComputed(function(){for(var t=!1,e=0;e<i.values().length;e++)if(i.values()[e].isSelected()){t=!0;break}return t})};n.DataRow=t}(VBench||(VBench={})),function(i){var t=function(){function t(){this.name=ko.observable(),this.rows=ko.observableArray(),this.columns=ko.observableArray(),this.description=ko.observable("")}return t.prototype.addColumn=function(t){var e=new i.DataColumn(this,t);return this.columns.push(e),e},t.prototype.addRow=function(t){var e=new i.DataRow(this,t);return this.rows.push(e),e},t.prototype.clear=function(){this.rows.removeAll(),this.columns.removeAll()},t}();i.DataTable=t}(VBench||(VBench={})),function(a){var t=function(){function t(t){void 0===t&&(t="data"),this._data=JSON.parse(document.getElementById(t).innerHTML)}return t.prototype.fetchLastestBenchmark=function(t,e){void 0===e&&(e=null);var i=e||new a.DataTable,o=this.fetchDataset(t);i.totalTests=o.totalTests,i.name(t),i.clear();for(var n=o.columns.length,s=0;s<n;s++){i.addColumn(o.columns[s]).shouldHide(s<7)}for(s=0;s<o.rows.length;s++)i.addRow(o.rows[s]);return i},t.prototype.fetchDatasetNames=function(){for(var t=[],e=0;e<this._data.length;e++)t.push(this._data[e].name);return t},t.prototype.fetchDataset=function(t){for(var e=0;e<this._data.length;e++)if(this._data[e].name===t)return this._data[e];return null},t.comparisonKind=0,t}();a.Repository=t}(VBench||(VBench={})),function(e){var t=function(){function t(t){this._repository=t,this._linesEnabled=!0,this.options=new e.DataTable,this._colorPicker=new e.ColorGenerator,this._chart=this.createLineChart()}return t.prototype.changeDataset=function(t){void 0===t&&(t=null),this._selectedDatasetId=t||this._selectedDatasetId,this._repository.fetchLastestBenchmark(this._selectedDatasetId,this.options),this._chart.data.labels.splice(0,this._chart.data.labels.length);for(var e=0;e<this.options.totalTests;e++)this._chart.data.labels.push("Test-"+(e+1));for(;0<this._chart.data.datasets.length;)this._chart.data.datasets.pop();this._chart.update()},t.prototype.updateChart=function(t){var e=t.row.key,i=t.columnIndex,o=e+" ["+t.row.table.columns()[i].name()+"]";if(t.isSelected()){console.debug(o+" |> add-series");var n=t.getDataPoints();if(0<n.length)(s=this.createSeriesBaseSettings()).data=n,s.label=o,this._chart.data.datasets.push(s);else console.debug("toast an error: no history")}else{console.debug(o+" |> remove-series");for(var s=this._chart.data.datasets,a=0;a<s.length;a++)if(s[a].label===o){s.splice(a,1);break}}this._chart.update()},t.prototype.toggleChartLines=function(){var e=this;this._linesEnabled=!this._linesEnabled;var i=this.createSeriesBaseSettings();return this._chart.data.datasets.forEach(function(t){t.showLine=e._linesEnabled,t.pointStyle=i.pointStyle,t.pointRadius=i.pointRadius,t.pointBorderWidth=i.pointBorderWidth}),this._chart.update(),this._linesEnabled},t.prototype.createLineChart=function(){var t=this._colorPicker.textColor.getValue(.5),e=this._colorPicker.textColor.getValue(.1);return new Chart(document.getElementById("chart"),{type:"line",data:{datasets:[]},options:{scales:{xAxes:[{gridLines:{color:e},ticks:{fontColor:t}}],yAxes:[{gridLines:{color:e},ticks:{beginAtZero:!0,fontColor:t}}]}}})},t.prototype.createSeriesBaseSettings=function(){var t=this._colorPicker.newColor();return{fill:!1,pointHitRadius:20,showLine:this._linesEnabled,backgroundColor:t.getValue(),borderColor:[t.getValue(.75)],pointRadius:this._linesEnabled?3:20,pointBorderWidth:(this._linesEnabled,6),pointStyle:this._linesEnabled?"circle":"line"}},t}();e.ChartEditor=t}(VBench||(VBench={})),function(a){var t=function(){function t(){this._repository=new a.Repository;var t=this._repository.fetchDatasetNames();this.datasetTabs=ko.observableArray(t),this.selectedDataset=ko.observable(t[0]),this.chartEditor=new a.ChartEditor(this._repository),this.chartEditor.changeDataset(t[0])}return t.prototype.attachEventHandlers=function(){var o=this;document.getElementById("timeline-table").addEventListener("click",function(t){var e=ko.contextFor(t.target);if(e.$data.typeId===a.DataCell.TypeCode){var i=e.$data;i.isNumeric()&&(i.isSelected(!i.isSelected()),o.chartEditor.updateChart(i))}});var i=document.getElementById("chart-lines-btn");i&&i.addEventListener("click",function(t){var e=o.chartEditor.toggleChartLines();i.getElementsByClassName("chart-lines-btn-value")[0].innerHTML=e?"on":"off"});var e=document.getElementById("compute-menu");e&&e.addEventListener("click",function(t){a.Repository.comparisonKind!=e.selectedIndex&&(a.Repository.comparisonKind=e.selectedIndex,o.chartEditor.changeDataset())},{passive:!0});for(var n=document.getElementsByClassName("tab-btn"),t=0;t<n.length;t++)n[t].addEventListener("click",function(t){for(var e=0;e<n.length;e++)n[e].classList.remove("is-active");var i=ko.contextFor(this);this.classList.add("is-active"),o.chartEditor.changeDataset(i.$data),o.selectedDataset(i.$data)});n[0].classList.add("is-active");var s=document.getElementById("info-btn");s&&s.addEventListener("click",function(t){s.classList.toggle("is-active");var e=document.getElementById("system-info");e&&e.classList.toggle("is-active")})},t}();a.HomePage=t}(VBench||(VBench={}));
//# sourceMappingURL=app.min.js.map