var VBench;!function(t){var e=function(){function t(t,e,o,n){void 0===n&&(n=1),this.r=t,this.g=e,this.b=o,this.a=n}return t.prototype.getValue=function(t){return"rgba("+this.r+","+this.g+","+this.b+","+(t||this.a)+")"},t}();t.Color=e}(VBench||(VBench={})),function(e){var t=function(){function t(){this._index=0,this._colors=[new e.Color(11,95,165),new e.Color(255,148,0),new e.Color(59,20,175),new e.Color(255,213,0),new e.Color(116,9,170),new e.Color(251,254,0),new e.Color(0,153,153),new e.Color(255,116,0),new e.Color(0,204,0),new e.Color(255,0,0)],this.textColor=new e.Color(225,225,225),this.backgroundColor=new e.Color(30,30,30)}return t.prototype.newColor=function(){return this._index=this._index<this._colors.length?this._index:0,this._colors[this._index++]},t.prototype.getCurrentColor=function(){return this._colors[this._index]},t}();e.ColorGenerator=t}(VBench||(VBench={})),function(t){var e=function(){function o(t,e){this.typeId=o.TypeId,this.table=t,this.isSelected=ko.observable(!1),this.name=ko.observable(e.name||"-"),this.shouldHide=ko.observable(!1)}return o.TypeId=2,o}();t.DataColumn=e}(VBench||(VBench={})),function(t){var e=function(){function a(t,e,o){this.typeId=a.TypeCode;var n=this;this.row=t,this.columnIndex=e,this.units=ko.observable(),this.value=ko.observable(o),this.isSelected=ko.observable(!1),this.isHidden=ko.observable(e<7),this.isNumeric=ko.pureComputed(function(){return"number"==typeof n.value()});var s=this.row.calculatedValues[e];s=s&&"number"==typeof s?this.computeDifference(o,s):null,this.difference=ko.observable(s)}return a.prototype.computeDifference=function(t,e){var o=e<=t?"+":"-",n=Math.abs(t-e);return"["+o+" "+n+" ("+(n/t*100).toFixed(0)+"%)]"},a.TypeCode=3,a}();t.DataCell=e}(VBench||(VBench={})),function(r){var t=function(){function t(t,e,o){var n,s=this;this.table=t,this.calculatedValues=[],this.values=ko.observableArray(),this.isSelected=ko.observable(!1),this.calculatedValues=o,this.benchmarkId=e[7];for(var a=0;a<e.length;a++)n=e[a],this.values.push(new r.DataCell(this,a,n));this.method=ko.pureComputed(function(){return s.values()[7].value()}),this.testNumber=ko.pureComputed(function(){return s.values()[0].value()}),this.isSelected=ko.pureComputed(function(){for(var t=!1,e=0;e<s.values().length;e++)if(s.values()[e].isSelected()){t=!0;break}return t})}return t.comparisonKind=0,t}();r.DataRow=t}(VBench||(VBench={})),function(n){var t=function(){function t(){this.totalTestRuns=0,this.id=ko.observable(),this.rows=ko.observableArray(),this.columns=ko.observableArray(),this.description=ko.observable("")}return t.prototype.addColumn=function(t){var e=new n.DataColumn(this,t);return this.columns.push(e),e},t.prototype.addRow=function(t,e){var o=new n.DataRow(this,t,e);return this.rows.push(o),o},t.prototype.clear=function(){this.rows.removeAll(),this.columns.removeAll()},t}();n.DataTable=t}(VBench||(VBench={})),function(h){var t=function(){function i(t){void 0===t&&(t="data"),this._data=JSON.parse(document.getElementById(t).innerHTML)}return i.prototype.fetchLastestBenchmark=function(t,e){void 0===e&&(e=null);var o=e||new h.DataTable,n=this.fetchDataset(t);o.totalTestRuns=n.testNo,o.description(n.systemInfo),o.id(t),o.clear();for(var s=[],a=n.columns.length,r=0;r<a;r++){o.addColumn(n.columns[r]).shouldHide(r<7),s.push(null)}var i=null,l=!0;for(r=0;r<n.rows.length;r++){var c=n.rows[r];i=c[7],l=s[7]!==i,s=this.resolveCalculatedValues(s,c,0<r?n.rows[r-1]:c,l),c[0]===n.testNo&&o.addRow(c,s)}return o},i.prototype.fetchDataPoints=function(t,e,o){var n,s=[],a=this.fetchDataset(t);if(a)for(var r=0;r<a.rows.length;r++)(n=a.rows[r]).values[7]===e&&s.push(n.values[o]);return s},i.prototype.fetchNamesOfAllDatasets=function(){for(var t=[],e=0;e<this._data.length;e++)t.push(this._data[e].name);return t},i.prototype.fetchDataset=function(t){for(var e=0;e<this._data.length;e++)if(this._data[e].name===t)return this._data[e];return null},i.prototype.resolveCalculatedValues=function(t,e,o,n){var s,a=t;switch(i.comparisonKind){default:a=o;break;case 1:for(var r=0;r<e.length;r++)(s=e[r])&&"number"==typeof s?n?a[r]=s:s<a[r]&&(a[r]=s):a[r]=s;break;case 2:for(r=0;r<e.length;r++)(s=e[r])&&"number"==typeof s?n?a[r]=s:s>a[r]&&(a[r]=s):a[r]=s}return a},i.comparisonKind=0,i}();h.Repository=t}(VBench||(VBench={})),function(e){var t=function(){function t(t){this._repository=t,this._linesEnabled=!0,this.options=new e.DataTable,this._colorPicker=new e.ColorGenerator,this._chart=this.createLineChart()}return t.prototype.changeDataset=function(t){void 0===t&&(t=null),this._selectedDatasetId=t||this._selectedDatasetId,this._repository.fetchLastestBenchmark(this._selectedDatasetId,this.options),this._chart.data.labels.splice(0,this._chart.data.labels.length);for(var e=0;e<this.options.totalTestRuns;e++)this._chart.data.labels.push("Test-"+(e+1));for(;0<this._chart.data.datasets.length;)this._chart.data.datasets.pop();this._chart.update()},t.prototype.updateChart=function(t){var e=t.row.method(),o=t.columnIndex,n=e+" ["+t.row.table.columns()[o].name()+"]";if(t.isSelected()){console.debug(n+" |> add-series");var s=this._repository.fetchDataPoints(this.options.id(),e,o);if(0<s.length)(a=this.createSeriesBaseSettings()).data=s,a.label=n,this._chart.data.datasets.push(a);else console.debug("toast an error")}else{console.debug(n+" |> remove-series");for(var a=this._chart.data.datasets,r=0;r<a.length;r++)if(a[r].label===n){a.splice(r,1);break}}this._chart.update()},t.prototype.toggleChartLines=function(){var e=this;this._linesEnabled=!this._linesEnabled;var o=this.createSeriesBaseSettings();return this._chart.data.datasets.forEach(function(t){t.showLine=e._linesEnabled,t.pointStyle=o.pointStyle,t.pointRadius=o.pointRadius,t.pointBorderWidth=o.pointBorderWidth}),this._chart.update(),this._linesEnabled},t.prototype.createLineChart=function(){var t=this._colorPicker.textColor.getValue(.5),e=this._colorPicker.textColor.getValue(.1);return new Chart(document.getElementById("chart"),{type:"line",data:{datasets:[]},options:{scales:{xAxes:[{gridLines:{color:e},ticks:{fontColor:t}}],yAxes:[{gridLines:{color:e},ticks:{beginAtZero:!0,fontColor:t}}]}}})},t.prototype.createSeriesBaseSettings=function(){var t=this._colorPicker.newColor();return{fill:!1,pointHitRadius:20,showLine:this._linesEnabled,backgroundColor:t.getValue(),borderColor:[t.getValue(.75)],pointRadius:this._linesEnabled?3:20,pointBorderWidth:(this._linesEnabled,6),pointStyle:this._linesEnabled?"circle":"line"}},t}();e.ChartEditor=t}(VBench||(VBench={})),function(r){var t=function(){function t(){this._repository=new r.Repository;var t=this._repository.fetchNamesOfAllDatasets();this.datasetTabs=ko.observableArray(t),this.selectedDataset=ko.observable(t[0]),this.chartEditor=new r.ChartEditor(this._repository),this.chartEditor.changeDataset(t[0])}return t.prototype.attachEventHandlers=function(){var n=this;document.getElementById("chartEditor").addEventListener("click",function(t){var e=ko.contextFor(t.target);if(e.$data.typeId===r.DataCell.TypeCode){var o=e.$data;o.isNumeric()&&(o.isSelected(!o.isSelected()),n.chartEditor.updateChart(o))}});var o=document.getElementById("chart-lines-btn");o&&o.addEventListener("click",function(t){var e=n.chartEditor.toggleChartLines();o.getElementsByClassName("chart-lines-btn-value")[0].innerHTML=e?"on":"off"});var e=document.getElementById("compute-menu");e&&e.addEventListener("click",function(t){r.Repository.comparisonKind!=e.selectedIndex&&(r.Repository.comparisonKind=e.selectedIndex,n.chartEditor.changeDataset())},{passive:!0});for(var s=document.getElementsByClassName("tab-btn"),t=0;t<s.length;t++)s[t].addEventListener("click",function(t){for(var e=0;e<s.length;e++)s[e].classList.remove("is-active");var o=ko.contextFor(this);this.classList.add("is-active"),n.chartEditor.changeDataset(o.$data),n.selectedDataset(o.$data)});s[0].classList.add("is-active");var a=document.getElementById("info-btn");a&&a.addEventListener("click",function(t){a.classList.toggle("is-active");var e=document.getElementById("system-info");e&&e.classList.toggle("is-active")})},t}();r.HomePage=t}(VBench||(VBench={}));
//# sourceMappingURL=app.min.js.map